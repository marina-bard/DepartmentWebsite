{% extends 'base.html.twig' %}

{% block body %}
   {# <h1>Project list</h1>

    <table>
        <thead>
            <tr>
                <th>Id</th>
                <th>Title</th>
                <th>Student</th>
                <th>Teacher</th>
                <th>Reviewer</th>
                <th>Course</th>
                <th>Studentgroup</th>
                <th>Startdate</th>
                <th>Enddate</th>
                <th>Description</th>
                <th>Content</th>
                <th>Ismoderated</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
        {% for project in projects %}
            <tr>
                <td><a href="{{ path('project_show', { '_locale' : _locale, 'slug' : project.slug }) }}">{{ project.id }}</a></td>
                <td>{{ project.title }}</td>
                <td>{{ project.student }}</td>
                <td>{{ project.teacher }}</td>
                <td>{{ project.reviewer }}</td>
                <td>{{ project.course }}</td>
                <td>{{ project.studentGroup }}</td>
                <td>{% if project.startDate %}{{ project.startDate|date('Y-m-d H:i:s') }}{% endif %}</td>
                <td>{% if project.endDate %}{{ project.endDate|date('Y-m-d H:i:s') }}{% endif %}</td>
                <td>{{ project.description }}</td>
                <td>{{ project.content }}</td>
                <td>{% if project.isModerated %}Yes{% else %}No{% endif %}</td>
                <td>
                    <ul>
                        <li>
                            <a href="{{ path('project_show', { '_locale' : _locale, 'slug': project.slug }) }}">show</a>
                        </li>
                        <li>
                            <a href="{{ path('project_edit', { '_locale' : _locale, 'slug': project.slug }) }}">edit</a>
                        </li>
                    </ul>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <ul>
        <li>
            <a href="{{ path('project_new', { '_locale' : _locale }) }}">Create a new entry</a>
        </li>
    </ul>

    #}
<div ng-controller="ProjectsCtrl">

    <script type="text/javascript">
        data = '{{ render(controller('DepartmentSiteProjectBundle:Project:getAll')) }}';
//        console.log(data);
    </script>

    <div class="container">
        <div class="row">
            <div class="col-xs-12">
                <div class="section-title"><span>{{ 'projects' | DICTIONARY(_locale) }}</span>
                    {% if is_granted('ROLE_USER') %}
                    <div class="v-separator"></div><a ng-href="{{ path('project_new') }}">Добавить новый</a>
                    {% endif %}
                </div>
            </div>
        </div>
        <div class="row">
            <div class="search-form">
                <input placeholder="{{ 'search_in_projects' | DICTIONARY(_locale) }}" title="search" type="search" />
            </div>
        </div>
        <div class="row">
            <div class="post-list">
                <div class="post-block" ng-repeat="project in projects">
                    <a class="post-header" ng-href="/{{ _locale }}/project/{{'{{project.slug}}'}}/show">{{ '{{ project.title }}' }}</a>
                    <div class="post-author"><span>{{ '{{ project.student }}' }}</span> {{ '{{ project.course }}' }} {{ 'course' | DICTIONARY(_locale) }} {{ '{{ project.studentGroup }}' }} {{ 'group' | DICTIONARY(_locale) }}</div>
                    <div class="post-links">
                        <a ng-href="/{{ _locale }}/project/{{'{{project.slug}}'}}/show">{{ 'reviews' | DICTIONARY(_locale) }} ( 2 )</a>
                        <div class="line"></div>
                        <a class="comments-link" ng-href="/{{ _locale }}/project/{{'{{project.slug}}'}}/show">{{ 'comments' | DICTIONARY(_locale) }} ( 2 )</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}
