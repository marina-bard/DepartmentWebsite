{% extends 'base.html.twig' %}

{% block body %}

    <script type="text/javascript">
        adverts_list = '{{ render(controller('DepartmentSiteDefaultBundle:Default:getAdvertsForMainPage')) }}';
        news_list = '{{ render(controller('DepartmentSiteDefaultBundle:Default:getNewsForMainPage')) }}';
    </script>

    <div ng-controller="MainPageCtrl">
        <div class="container-fluid">
            <div class="announcements">
                <div class="container">
                    <div class="row">
                        <div class="col-md-8 announce-cards">
                            <div class="row">
                                <div class="section-title"><span>Объявления</span>
                                    <div class="v-separator"></div><a ng-href="{{ path('advert_index', {'page': '1'}) }}">Все объявления</a>
                                </div>
                            </div>
                            <div  ng-repeat="advert in adverts">
                                <div ng-class="($index % 2 !== 0) ? 'row' : ''">
                                    <div class="col-md-6 cards-column">
                                        <div class="announce-card">
                                            <div class="announce-card-content">
                                                <div class="my_announcement-comments-count-circle pull-right">2</div><i class="announce-card-date">{{ '{{advert.created_at.date | dateFilter | date:"dd.MM.yyyy"}}' }}</i>
                                                <br /><a class="announce-card-title" ng-href="/advert/{{'{{advert.slug}}'}}/show">{{ '{{ advert.title }}' }}</a>
                                                <div class="announce-card-lead">{{ '{{ advert.description }}' }}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 sidebar">
                            {% include ':default:sidebar.html.twig'%}
                        </div>
                    </div>
                </div>
            </div>
            <div class="news">
                <div class="container">
                    <div class="row">
                        <div class="section-title"><span>Новости кафедры</span>
                            <div class="v-separator"></div><a ng-href="{{ path('news_index', {'page': '1'})}}">Все новости</a></div>
                    </div>
                    <div ng-repeat="oneNews in news">
                        <div ng-class="($index % 2 !== 0) ? 'row' : ''">
                            <div ng-class="($index % 2 === 0) ? 'col-md-6 news-column' : 'col-md-6 news-column2'">
                                <a ng-href="/news/{{'{{oneNews.slug}}'}}/show"><img alt="alt" class="news-item-image" ng-src="{{'{{oneNews.photo}}'}}" /></a>
                                <div class="news-item-date">{{'{{oneNews.created_at.date | dateFilter | date:"dd.MM.yyyy"}}'}}</div>
                                <br /><a class="news-item-title" ng-href="/news/{{'{{oneNews.slug}}'}}/show">{{'{{ oneNews.title }}'}}</a>
                                <div class="news-item-lead">{{'{{ oneNews.description}}'}}</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

{% endblock %}
