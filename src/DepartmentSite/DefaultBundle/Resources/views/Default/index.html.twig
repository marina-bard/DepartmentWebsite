{% extends 'base.html.twig' %}

{% block body %}

    <script type="text/javascript">
        adverts_list = '{{ render(controller('DepartmentSiteDefaultBundle:Default:getAdvertsForMainPage')) }}';
        news_list = '{{ render(controller('DepartmentSiteDefaultBundle:Default:getNewsForMainPage')) }}';
//        console.log(adverts_list);
    </script>

    <div ng-controller="MainPageCtrl">
        <div class="container-fluid">
            <div class="announcements">
                <div class="container">
                    <div class="row">
                        <div class="col-md-8 announce-cards">
                            <div class="row">
                                <div class="section-title"><span>Объявления</span>
                                    <div class="v-separator"></div><a ng-href="{{ path('advert_index', {'page': '1'}) }}">Все объявления</a>
                                </div>
                            </div>
                            <div  ng-if="$index % 2 == 0" ng-repeat="advert in adverts | orderBy: &#39;id&#39;">
                                <div class="col-md-6 cards-column">
                                    <div class="announce-card">
                                        <div class="announce-card-content">
                                            <div class="my_announcement-comments-count-circle pull-right">2</div><i class="announce-card-date">{{ '{{adverts[$index].created_at.date | date}}' }}</i>
                                            <br /><a class="announce-card-title" ng-href="/advert/{{'{{adverts[$index].slug}}'}}/show">{{ '{{ adverts[$index].title }}' }}</a>
                                            <div class="announce-card-lead">{{ '{{ adverts[$index].description }}' }}</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6 cards-column" ng-if="adverts[$index + 1]">
                                    <div class="announce-card">
                                        <div class="announce-card-content">
                                            <div class="my_announcement-comments-count-circle pull-right">2</div><i class="announce-card-date">{{ '{{ adverts[$index + 1].created_at.date | date}}' }}</i>
                                            <br /><a class="announce-card-title" ng-href="/advert/{{'{{adverts[$index+1].slug}}'}}/show">{{ '{{ adverts[$index + 1].title }}' }}</a>
                                            <div class="announce-card-lead"> {{ '{{ adverts[$index + 1].description }}' }}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                        {#<div class="col-md-4 sidebar" ng-include="&#39;views/main/announcements/sidebar.html&#39;"></div>#}
                </div>
            </div>
            <div class="news">
                <div class="container">
                    <div class="row">
                        <div class="section-title"><span>Новости кафедры</span>
                            <div class="v-separator"></div><a ng-href="{{ path('news_index', {'page': '1'})}}">Все новости</a></div>
                    </div>
                    <div ng-repeat="oneNews in news">
                        <div ng-class="($index % 2 !== 0) ? 'row' : ''">
                            <div ng-class="($index % 2 === 0) ? 'col-md-6 news-column' : 'col-md-6 news-column2'">
                                <a ng-href="/news/{{'{{oneNews.slug}}'}}/show"><img alt="alt" class="news-item-image" ng-src="{{'{{oneNews.photo.pathphoto.path}}'}}" /></a>
                                <div class="news-item-date">{{'{{oneNews.created_at | date}}'}}</div>
                                <br /><a class="news-item-title" ng-href="/news/{{'{{oneNews.slug}}'}}/show">{{'{{ oneNews.title }}'}}</a>
                                <div class="news-item-lead">{{'{{ oneNews.description}}'}}</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

{% endblock %}
